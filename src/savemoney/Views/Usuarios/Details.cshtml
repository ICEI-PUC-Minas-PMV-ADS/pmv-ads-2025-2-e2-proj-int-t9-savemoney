@model savemoney.Models.Usuario

@{
    ViewData["Title"] = "Detalhes do Usuário";
}

<!-- Modal Overlay -->
<div class="modal-overlay" id="detailsModal">
    <div class="modal-container">

        <!-- Modal Card -->
        <div class="details-card">

            <!-- Header -->
            <div class="details-header">
                <div class="header-icon">
                    <span class="material-symbols-outlined" aria-hidden="true">account_circle</span>
                </div>
                <h2 class="details-title">Detalhes do Usuário</h2>
                <p class="details-subtitle">Informações completas da conta</p>
            </div>

            <!-- Content -->
            <div class="details-content">

                <!-- Info Grid -->
                <div class="info-grid">

                    <!-- Nome -->
                    <div class="info-item">
                        <div class="info-label">
                            <span class="material-symbols-outlined label-icon" aria-hidden="true">person</span>
                            <span>Nome Completo</span>
                        </div>
                        <div class="info-value">@Html.DisplayFor(model => model.Nome)</div>
                    </div>

                    <!-- Email -->
                    <div class="info-item">
                        <div class="info-label">
                            <span class="material-symbols-outlined label-icon" aria-hidden="true">mail</span>
                            <span>Email</span>
                        </div>
                        <div class="info-value">@Html.DisplayFor(model => model.Email)</div>
                    </div>

                    <!-- Documento -->
                    <div class="info-item">
                        <div class="info-label">
                            <span class="material-symbols-outlined label-icon" aria-hidden="true">badge</span>
                            <span>Documento</span>
                        </div>
                        <div class="info-value">@Html.DisplayFor(model => model.Documento)</div>
                    </div>

                    <!-- Perfil -->
                    <div class="info-item">
                        <div class="info-label">
                            <span class="material-symbols-outlined label-icon" aria-hidden="true">supervisor_account</span>
                            <span>Perfil</span>
                        </div>
                        <div class="info-value">
                            <span class="badge badge-@Model.Perfil.ToString().ToLower()">
                                @Html.DisplayFor(model => model.Perfil)
                            </span>
                        </div>
                    </div>

                    <!-- Tipo de Usuário -->
                    <div class="info-item">
                        <div class="info-label">
                            <span class="material-symbols-outlined label-icon" aria-hidden="true">account_tree</span>
                            <span>Tipo de Usuário</span>
                        </div>
                        <div class="info-value">@Html.DisplayFor(model => model.TipoUsuario)</div>
                    </div>

                    <!-- Data de Criação -->
                    <div class="info-item">
                        <div class="info-label">
                            <span class="material-symbols-outlined label-icon" aria-hidden="true">calendar_today</span>
                            <span>Membro desde</span>
                        </div>
                        <div class="info-value">
                            @Model.DataCadastro.ToString("dd/MM/yyyy 'às' HH:mm")
                        </div>
                    </div>

                    <!-- ✅ NOVO: Último Acesso -->
                    @if (Model.UltimoAcesso.HasValue)
                    {
                        <div class="info-item">
                            <div class="info-label">
                                <span class="material-symbols-outlined label-icon" aria-hidden="true">schedule</span>
                                <span>Último Acesso</span>
                            </div>
                            <div class="info-value">
                                @Model.UltimoAcesso.Value.ToString("dd/MM/yyyy 'às' HH:mm")
                            </div>
                        </div>
                    }

                </div>

                <!-- Stats Cards -->
                <div class="stats-section">
                    <div class="stat-card">
                        <span class="material-symbols-outlined stat-icon" aria-hidden="true">check_circle</span>
                        <div class="stat-content">
                            <span class="stat-label">Status</span>
                            <span class="stat-value">Ativo</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <span class="material-symbols-outlined stat-icon" aria-hidden="true">shield</span>
                        <div class="stat-content">
                            <span class="stat-label">Tipo</span>
                            <span class="stat-value">@Model.TipoUsuario</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <span class="material-symbols-outlined stat-icon" aria-hidden="true">account_balance</span>
                        <div class="stat-content">
                            <span class="stat-label">Categoria</span>
                            <span class="stat-value">@Model.Perfil</span>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Footer Actions -->
            <div class="details-footer">
                <a asp-action="Edit" asp-route-id="@Model?.Id" class="btn btn-primary">
                    <span class="material-symbols-outlined" aria-hidden="true">edit</span>
                    Editar
                </a>

                @if (User.IsInRole("Administrador"))
                {
                    <a asp-action="Index" class="btn btn-secondary">
                        <span class="material-symbols-outlined" aria-hidden="true">arrow_back</span>
                        Voltar
                    </a>
                }
                else
                {
                    <a asp-controller="Dashboard" asp-action="Index" class="btn btn-secondary">
                        <span class="material-symbols-outlined" aria-hidden="true">arrow_back</span>
                        Dashboard
                    </a>
                }
            </div>

        </div>

    </div>
</div>

@section css {
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="~/css/details.css" asp-append-version="true" />
}

@section Scripts {
    <script src="~/js/details.js" asp-append-version="true"></script>
}