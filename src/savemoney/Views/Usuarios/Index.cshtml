@model IEnumerable<savemoney.Models.Usuario>

@{
    ViewData["Title"] = "Usuários";
}

<div class="index-page">

    <div class="index-container">

        <!-- Header -->
        <div class="page-header">
            <div class="header-left">
                <div class="header-icon">
                    <span class="material-symbols-outlined" aria-hidden="true">group</span>
                </div>
                <div class="header-text">
                    <h1 class="page-title">Usuários</h1>
                    <p class="page-subtitle">Gerencie os usuários do sistema</p>
                </div>
            </div>
            <div class="header-right">
                <a asp-action="Create" class="btn btn-success">
                    <span class="material-symbols-outlined" aria-hidden="true">person_add</span>
                    Novo Usuário
                </a>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon stat-primary">
                    <span class="material-symbols-outlined" aria-hidden="true">group</span>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Total de Usuários</span>
                    <span class="stat-value">@Model.Count()</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon stat-success">
                    <span class="material-symbols-outlined" aria-hidden="true">verified_user</span>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Administradores</span>
                    <span class="stat-value">@Model.Count(u => u.TipoUsuario.ToString() == "Administrador")</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon stat-info">
                    <span class="material-symbols-outlined" aria-hidden="true">person</span>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Usuários Padrão</span>
                    <span class="stat-value">@Model.Count(u => u.TipoUsuario.ToString() == "Usuario")</span>
                </div>
            </div>
        </div>

        <!-- Table Card -->
        <div class="table-card">

            <!-- Table Header -->
            <div class="table-header">
                <h2 class="table-title">Lista de Usuários</h2>
                <div class="table-search">
                    <span class="material-symbols-outlined search-icon" aria-hidden="true">search</span>
                    <input type="text"
                           id="searchInput"
                           class="search-input"
                           placeholder="Buscar usuário..."
                           aria-label="Buscar usuário" />
                </div>
            </div>

            <!-- Table Responsive Wrapper -->
            <div class="table-wrapper">
                <table class="data-table" id="usersTable">
                    <thead>
                        <tr>
                            <th>
                                <span class="material-symbols-outlined th-icon" aria-hidden="true">person</span>
                                Nome
                            </th>
                            <th>
                                <span class="material-symbols-outlined th-icon" aria-hidden="true">mail</span>
                                Email
                            </th>
                            <th class="hide-mobile">
                                <span class="material-symbols-outlined th-icon" aria-hidden="true">badge</span>
                                Documento
                            </th>
                            <th class="hide-tablet">
                                <span class="material-symbols-outlined th-icon" aria-hidden="true">calendar_today</span>
                                Data de Cadastro
                            </th>
                            <th>
                                <span class="material-symbols-outlined th-icon" aria-hidden="true">supervisor_account</span>
                                Perfil
                            </th>
                            <th class="text-center">
                                <span class="material-symbols-outlined th-icon" aria-hidden="true">settings</span>
                                Ações
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr data-search="@item.Nome @item.Email @item.Documento">
                                <td class="user-name">
                                    <div class="user-avatar">
                                        <span class="material-symbols-outlined" aria-hidden="true">account_circle</span>
                                    </div>
                                    <span>@Html.DisplayFor(modelItem => item.Nome)</span>
                                </td>
                                <td class="user-email">@Html.DisplayFor(modelItem => item.Email)</td>
                                <td class="hide-mobile">@Html.DisplayFor(modelItem => item.Documento)</td>
                                <td class="hide-tablet">
                                    @item.DataCadastro.ToString("dd/MM/yyyy")
                                </td>
                                <td>
                                    <span class="badge badge-@item.Perfil.ToString().ToLower()">
                                        @Html.DisplayFor(modelItem => item.Perfil)
                                    </span>
                                </td>
                                <td class="text-center">
                                    <div class="action-buttons">
                                        <a asp-action="Details"
                                           asp-route-id="@item.Id"
                                           class="btn-action btn-info"
                                           title="Visualizar"
                                           aria-label="Visualizar usuário @item.Nome">
                                            <span class="material-symbols-outlined" aria-hidden="true">visibility</span>
                                        </a>
                                        <a asp-action="Edit"
                                           asp-route-id="@item.Id"
                                           class="btn-action btn-primary"
                                           title="Editar"
                                           aria-label="Editar usuário @item.Nome">
                                            <span class="material-symbols-outlined" aria-hidden="true">edit</span>
                                        </a>
                                        <a asp-action="Delete"
                                           asp-route-id="@item.Id"
                                           class="btn-action btn-danger"
                                           title="Excluir"
                                           aria-label="Excluir usuário @item.Nome">
                                            <span class="material-symbols-outlined" aria-hidden="true">delete</span>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- Empty State -->
            @if (!Model.Any())
            {
                <div class="empty-state">
                    <span class="material-symbols-outlined empty-icon" aria-hidden="true">group_off</span>
                    <h3 class="empty-title">Nenhum usuário encontrado</h3>
                    <p class="empty-description">Comece criando seu primeiro usuário</p>
                    <a asp-action="Create" class="btn btn-primary">
                        <span class="material-symbols-outlined" aria-hidden="true">person_add</span>
                        Criar Primeiro Usuário
                    </a>
                </div>
            }

        </div>

    </div>

</div>

@section css {
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="~/css/index.css" asp-append-version="true" />
}

@section Scripts {
    <script src="~/js/index.js" asp-append-version="true"></script>
}