@{
    ViewData["Title"] = "Análise de Tendências Financeiras";
}

@section css {
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="~/css/tendenciaFinanceiraIndex.css" asp-append-version="true" />
}

<div class="background-fixed-image" aria-hidden="true"></div>

<main class="tendencia-page-main fade-in">

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">
                <span class="material-symbols-outlined hero-icon" aria-hidden="true">insights</span>
                Análise de Tendências
            </h1>
            <p class="hero-subtitle">
                Descubra padrões nas suas finanças e tome decisões mais inteligentes
                com análises detalhadas de receitas, despesas e evolução do saldo.
            </p>
        </div>
    </section>

    <!-- Info Card -->
    <div class="info-card glass-panel">
        <div class="info-icon">
            <span class="material-symbols-outlined" aria-hidden="true">info</span>
        </div>
        <div class="info-content">
            <h2 class="info-title">Como funciona?</h2>
            <p class="info-text">
                Esta ferramenta analisa suas receitas e despesas ao longo do tempo, identificando
                padrões de <strong>crescimento</strong>, <strong>redução</strong> ou <strong>estabilidade</strong>
                em suas finanças.
            </p>
            <div class="info-features">
                <div class="feature-item">
                    <span class="material-symbols-outlined feature-icon" aria-hidden="true">check_circle</span>
                    <span>Mínimo: 3 meses</span>
                </div>
                <div class="feature-item">
                    <span class="material-symbols-outlined feature-icon" aria-hidden="true">check_circle</span>
                    <span>Máximo: 12 meses</span>
                </div>
                <div class="feature-item">
                    <span class="material-symbols-outlined feature-icon" aria-hidden="true">check_circle</span>
                    <span>Análise em tempo real</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Form Card -->
    <div class="form-card glass-panel">
        <form asp-action="GerarAnalise" method="post" id="formAnalise" novalidate>
            @Html.AntiForgeryToken()

            <div class="form-grid">
                <!-- Select Período -->
                <div class="form-group">
                    <label for="meses" class="form-label">
                        <span class="material-symbols-outlined label-icon" aria-hidden="true">calendar_month</span>
                        Período de Análise
                    </label>
                    <select id="meses"
                            name="meses"
                            class="form-input"
                            required
                            aria-describedby="mesesHelp">
                        <option value="">Selecione o período...</option>
                        <option value="1">Último mês</option>
                        <option value="3" selected>Últimos 3 meses (Recomendado)</option>
                        <option value="6">Últimos 6 meses</option>
                        <option value="9">Últimos 9 meses</option>
                        <option value="12">Últimos 12 meses</option>
                    </select>
                    <small id="mesesHelp" class="form-text">
                        Quanto maior o período, mais precisa é a análise
                    </small>
                </div>

                <!-- Botão Submit -->
                <div class="form-group form-group-button">
                    <button type="submit" class="btn-action btn-primary w-100">
                        <span class="material-symbols-outlined" aria-hidden="true">insights</span>
                        Gerar Análise
                    </button>
                </div>
            </div>

            <!-- Validation Errors -->
            @if (ViewData.ModelState.ErrorCount > 0)
            {
                <div class="alert alert-danger">
                    <span class="material-symbols-outlined alert-icon" aria-hidden="true">error</span>
                    <span>@Html.ValidationSummary(false, "", new { @class = "mb-0" })</span>
                </div>
            }

            @if (TempData["Erro"] != null)
            {
                <div class="alert alert-danger">
                    <span class="material-symbols-outlined alert-icon" aria-hidden="true">error</span>
                    <span>@TempData["Erro"]</span>
                </div>
            }
        </form>
    </div>

    <!-- Tips Card -->
    <div class="tips-card glass-panel">
        <h3 class="tips-title">
            <span class="material-symbols-outlined" aria-hidden="true">lightbulb</span>
            Dicas para melhores resultados
        </h3>
        <div class="tips-grid">
            <div class="tip-item">
                <div class="tip-number">1</div>
                <div class="tip-content">
                    <h4 class="tip-heading">Registre regularmente</h4>
                    <p class="tip-text">Adicione receitas e despesas assim que ocorrerem</p>
                </div>
            </div>
            <div class="tip-item">
                <div class="tip-number">2</div>
                <div class="tip-content">
                    <h4 class="tip-heading">Categorize corretamente</h4>
                    <p class="tip-text">Use categorias consistentes para melhor análise</p>
                </div>
            </div>
            <div class="tip-item">
                <div class="tip-number">3</div>
                <div class="tip-content">
                    <h4 class="tip-heading">Analise mensalmente</h4>
                    <p class="tip-text">Acompanhe sua evolução todos os meses</p>
                </div>
            </div>
        </div>
    </div>

</main>

@section Scripts {
    <script src="~/js/tendenciaFinanceiraIndex.js" asp-append-version="true"></script>
}