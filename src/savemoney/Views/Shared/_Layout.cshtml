@using System.Security.Claims
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Save Money - Gestão Financeira Inteligente e Premium" />
    <meta name="author" content="Save Money" />
    <meta name="theme-color" content="#10111a" />
    <title>@ViewData["Title"] - Save Money</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Design System - Ordem de carregamento importante -->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/header.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/footer.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/toast-messages.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/export-modal.css" />
    @RenderSection("Styles", required: false)
    @await RenderSectionAsync("css", required: false)
</head>
<body>
    @await Html.PartialAsync("_Header")

    <!-- Toast Messages Container -->
    <div class="toast-container" id="toastContainer">
        @if (TempData["SuccessMessage"] != null)
        {
            <div class="toast-message toast-success" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-icon">
                    <span class="material-symbols-outlined" aria-hidden="true">check_circle</span>
                </div>
                <div class="toast-content">
                    <strong class="toast-title">Sucesso!</strong>
                    <p class="toast-text">@TempData["SuccessMessage"]</p>
                </div>
                <button type="button" class="toast-close" aria-label="Fechar">
                    <span class="material-symbols-outlined" aria-hidden="true">close</span>
                </button>
            </div>
        }

        @if (TempData["ErrorMessage"] != null)
        {
            <div class="toast-message toast-error" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-icon">
                    <span class="material-symbols-outlined" aria-hidden="true">error</span>
                </div>
                <div class="toast-content">
                    <strong class="toast-title">Erro!</strong>
                    <p class="toast-text">@TempData["ErrorMessage"]</p>
                </div>
                <button type="button" class="toast-close" aria-label="Fechar">
                    <span class="material-symbols-outlined" aria-hidden="true">close</span>
                </button>
            </div>
        }

        @if (TempData["InfoMessage"] != null)
        {
            <div class="toast-message toast-info" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-icon">
                    <span class="material-symbols-outlined" aria-hidden="true">info</span>
                </div>
                <div class="toast-content">
                    <strong class="toast-title">Informação</strong>
                    <p class="toast-text">@TempData["InfoMessage"]</p>
                </div>
                <button type="button" class="toast-close" aria-label="Fechar">
                    <span class="material-symbols-outlined" aria-hidden="true">close</span>
                </button>
            </div>
        }

        @if (TempData["WarningMessage"] != null)
        {
            <div class="toast-message toast-warning" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-icon">
                    <span class="material-symbols-outlined" aria-hidden="true">warning</span>
                </div>
                <div class="toast-content">
                    <strong class="toast-title">Atenção!</strong>
                    <p class="toast-text">@TempData["WarningMessage"]</p>
                </div>
                <button type="button" class="toast-close" aria-label="Fechar">
                    <span class="material-symbols-outlined" aria-hidden="true">close</span>
                </button>
            </div>
        }
    </div>

    <main role="main" class="main-content">
        @RenderBody()
    </main>

    @await Html.PartialAsync("_Footer")
    <partial name="_ExportModal" />
    <!-- Scripts - ORDEM CORRETA -->
    <!-- 1. jQuery PRIMEIRO (obrigatório) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous"></script>

    <!-- 2. jQuery Validation -->
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation-unobtrusive@4.0.0/dist/jquery.validate.unobtrusive.min.js"></script>

    <!-- 3. Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 4. Scripts customizados -->
    <script src="~/js/header.js" asp-append-version="true"></script>
    <script src="~/js/notificacoes.js" asp-append-version="true"></script>
    <script src="~/js/toast-messages.js" asp-append-version="true"></script>
    <script src="~/js/theme-loader.js" asp-append-version="true"></script>
    <script src="~/js/export-modal.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- LEMBRETE, retirar e ajustar posteriormente, devido a restrição de escopo -->
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>