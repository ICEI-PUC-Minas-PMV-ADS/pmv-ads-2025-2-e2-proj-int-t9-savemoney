@model ErrorViewModel
@{
    Layout = "_Layout";
    ViewData["Title"] = "Erro - Save Money";
}

<div class="error-page-container">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-12 col-md-10 col-lg-8">
                <div class="premium-card text-center" style="padding: 3rem 2rem;">

                    <!-- Ícone de Erro -->
                    <div class="error-icon mb-4" aria-hidden="true">
                        <i class="bi bi-exclamation-triangle-fill" style="font-size: 5rem; color: var(--danger);"></i>
                    </div>

                    <!-- Título Principal -->
                    <h1 class="error-title mb-3" style="color: var(--text-primary); font-size: clamp(2rem, 5vw, 3rem); font-weight: 800;">
                        Ops! Algo deu errado
                    </h1>

                    <!-- Subtítulo -->
                    <p class="error-subtitle mb-4" style="color: var(--text-secondary); font-size: 1.125rem; max-width: 500px; margin-left: auto; margin-right: auto;">
                        Ocorreu um erro inesperado ao processar sua requisição. Nossa equipe já foi notificada.
                    </p>

                    <hr style="border-color: var(--border-color); margin: 2rem 0;" />

                    <!-- ID da Requisição -->
                    @if (Model?.ShowRequestId == true)
                    {
                        <div class="error-details text-start mb-4" style="background-color: var(--bg-secondary); border: 0.0625rem solid var(--border-color); border-radius: 0.5rem; padding: 1.25rem;">
                            <p style="color: var(--text-secondary); margin-bottom: 0.5rem;">
                                <strong style="color: var(--text-primary);">ID da Requisição:</strong>
                            </p>
                            <code class="error-code" style="background-color: var(--bg-card); color: var(--accent-primary); padding: 0.5rem 1rem; border-radius: 0.375rem; display: inline-block; font-size: 0.9375rem; word-break: break-all;">
                                @Model.RequestId
                            </code>
                            <p style="color: var(--text-muted); font-size: 0.875rem; margin-top: 0.75rem; margin-bottom: 0;">
                                Informe este código ao entrar em contato com o suporte.
                            </p>
                        </div>
                    }

                    <!-- Informações de Desenvolvimento -->
                    <div class="dev-info text-start" style="background-color: var(--bg-secondary); border: 0.0625rem solid var(--border-color); border-left: 0.25rem solid var(--warning); border-radius: 0.5rem; padding: 1.25rem;">
                        <h3 style="color: var(--warning); font-size: 1.125rem; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="bi bi-info-circle-fill"></i>
                            Modo de Desenvolvimento
                        </h3>
                        <p style="color: var(--text-secondary); font-size: 0.9375rem; margin-bottom: 0.5rem;">
                            Trocar para o ambiente <strong style="color: var(--text-primary);">Development</strong> exibirá informações detalhadas sobre o erro.
                        </p>
                        <p style="color: var(--danger); font-size: 0.875rem; font-weight: 600; margin-bottom: 0;">
                            ⚠️ O ambiente Development NÃO deve ser usado em produção.
                        </p>
                    </div>

                    <!-- Botões de Ação -->
                    <div class="error-actions mt-4" style="display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center;">
                        <a asp-controller="Dashboard" asp-action="Index" class="btn btn-primary" style="min-width: 10rem;">
                            <i class="bi bi-house-fill me-2"></i>
                            Voltar ao Início
                        </a>
                        <button onclick="window.history.back()" class="btn btn-secondary" style="min-width: 10rem;">
                            <i class="bi bi-arrow-left me-2"></i>
                            Página Anterior
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

@section css {
    <style>
        .error-page-container {
            min-height: calc(100vh - var(--header-height) - 8rem);
            display: flex;
            align-items: center;
        }

        .error-icon i {
            animation: error-pulse 2s ease-in-out infinite;
        }

        @@keyframes error-pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }

        .error-code {
            font-family: 'Courier New', monospace;
            user-select: all;
        }

        /* Responsividade */
        @@media (max-width: 36rem) {
            .premium-card {
                padding: 2rem 1.25rem !important;
            }

            .error-icon i {
                font-size: 4rem !important;
            }

            .error-actions {
                flex-direction: column;
            }

                .error-actions .btn {
                    width: 100%;
                }
        }

        @@media (prefers-reduced-motion: reduce) {
            .error-icon i {
                animation: none;
            }
        }
    </style>
}